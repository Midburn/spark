{
  "name": "spark",
  "//version": [
    "the version number is available to the scripts in the npm_package_version environment variable",
    "this is part of the deployment proess, so it is important to update the version number",
    "version name corresponds to the github release name / tag name - https://github.com/Midburn/Spark/releases"
  ],
  "version": "3.3.1",
  "private": true,
  "scripts": {
    "postinstall": "cd public && npm install",
    "start": "node server.js",
    "pretest": "npm run lint",
    "test": "npm run testcore",
    "testcore": "npm run create_test_db  && cross-env SPARK_DB_DBNAME=spark_test NODE_ENV=testing mocha \"tests/**/*test.js\" ",
    "//devops": "Generic deployment / devops commands, used from .travis.yml, see /docs/development/releases-and-deployment.md",
    "//log": "send a generic log notification to slack",
    "log": "curl -X POST -g $npm_config_webhook --data-urlencode 'payload={\"channel\": \"'\"#${npm_config_channel:-sparksystem-log}\"'\", \"username\": \"'\"${npm_config_username:-bot}\"'\", \"text\": \"'\"${npm_config_text}\"'\", \"icon_emoji\": \"'\"${npm_config_emoji:-ghost}\"'\"}'",
    "//build": "builds the deployment package",
    "build": "touch \"${npm_config_file}\" && tar --exclude=.github* --exclude=.idea* --exclude=.git* --exclude=*.sqlite3 --exclude=opsworks.js --exclude=*.tar.gz --exclude=vagrant --exclude=docs --exclude=.travis* --exclude=*.iml --exclude=.env --exclude=*.log -czf \"${npm_config_file}\" . && echo \"created build package: ${npm_config_file}\"",
    "//upload": "uploads the deployment package to slack and returns the package private url",
    "upload": "curl -F \"file=@${npm_config_file}\" -F \"filename=${npm_config_file}\" -F \"token=${npm_config_token}\" \"${npm_config_url:-https://slack.com/api/files.upload}\" | jq -r .file.url_private > \"${npm_config_file}.slack_url\"",
    "//download": "download a deployment package from private slack url",
    "download": "curl -H \"Authorization: Bearer ${npm_config_token}\" -g \"${npm_config_url}\" -o \"${npm_config_file}\"",
    "//deploy": "prepare the directory of an extracted deployment package",
    "deploy": "echo SPARK_DEPLOYMENT_TIME=\\\"$(date \"+%F %T\")\\\" >> .env",
    "//lint": "runs static analysis using eslint",
    "lint": "./node_modules/.bin/eslint .",
    "//createdb": "bootstraps MySql with a clean spark database & user",
    "createdb": "mysql -u root < migrations/create_db.sql",
    "create_test_db": "cross-env SPARK_DB_DBNAME=spark_test mysql -u root --protocol=tcp < migrations/create_test_db.sql && cross-env SPARK_DB_DBNAME=spark_test knex migrate:latest",
    "snyk-protect": "snyk protect",
    "seed": "node ./seeds/seeder.js",
    "prepublish": "npm run snyk-protect",
    "newDevDB": "npm run createdb && knex migrate:latest && npm run seed",
    "hot": "browser-sync start --proxy 'http://localhost:3000/' --files 'views' 'public'",
    "//hot": "echo npm run hot - will open a hot reload browser updating on changes in view & public folders",
    "prepare": "npm run snyk-protect"
  },
  "dependencies": {
    "archiver": "^2.1.1",
    "async": "^2.1.4",
    "aws-sdk": "^2.814.0",
    "babel-core": "^6.21.0",
    "babel-loader": "^6.2.10",
    "babel-register": "^6.18.0",
    "bcrypt-nodejs": "0.0.3",
    "body-parser": "~1.18.2",
    "bookshelf": "^0.10.0",
    "bookshelf-json-columns": "^2.1.0",
    "compression": "^1.6.2",
    "config": "^1.21.0",
    "connect-flash": "^0.1.1",
    "connect-roles": "^3.1.2",
    "connect-session-knex": "^1.3.1",
    "cookie-parser": "~1.4.3",
    "csurf": "^1.9.0",
    "csv": "^1.1.1",
    "dateformat": "1.0.12",
    "debug": "~2.6.7",
    "dotenv": "^4.0.0",
    "drupal-hash": "^1.0.3",
    "express": "~4.16.0",
    "express-breadcrumbs": "0.0.2",
    "express-compile-sass": "4.0.0",
    "express-fileupload": "^0.3.0",
    "express-mailer": "^0.3.1",
    "express-recaptcha": "^2.1.0",
    "express-session": "^1.14.0",
    "i18next": "^8.2.1",
    "i18next-express-middleware": "^1.0.5",
    "i18next-localstorage-cache": "^1.1.1",
    "i18next-node-fs-backend": "^1.0.0",
    "jade": "^1.11.0",
    "json2csv": "^3.7.3",
    "jsonwebtoken": "^8.0.0",
    "knex": "^0.14.3",
    "lodash": "^4.17.4",
    "mocker-data-generator": "^2.5.2",
    "module-id": "2.0.4",
    "moment": "^2.21.0",
    "morgan": "~1.9.0",
    "mysql": "^2.11.1",
    "node-cache": "^4.1.1",
    "node-sass": "^4.11.0",
    "nodemon": "^1.14.11",
    "opbeat": "^4.16.0",
    "passport": "^0.3.2",
    "passport-facebook": "2.1.1",
    "passport-jwt": "^2.2.1",
    "passport-local": "^1.0.0",
    "passport-remember-me": "^0.0.1",
    "rand-token": "^0.2.1",
    "request": "^2.74.0",
    "requirejs": "^2.3.2",
    "serve-favicon": "~2.4.3",
    "snyk": "^1.85.0",
    "sprintf-js": "1.0.3",
    "superagent": "^3.5.0",
    "webpack": "^2.2.0",
    "winston": "2.3.0",
    "winston-slack-transport": "^2.0.0",
    "xml2js-parser": "^1.1.1"
  },
  "devDependencies": {
    "babel-cli": "^6.18.0",
    "babel-core": "^6.21.0",
    "babel-eslint": "^7.1.1",
    "babel-loader": "^6.2.10",
    "browser-sync": "^2.23.6",
    "chai": "*",
    "cross-env": "3.2.4",
    "eslint": "^4.13.1",
    "eslint-config-standard": "^6.2.1",
    "eslint-plugin-promise": "^3.5.0",
    "eslint-plugin-standard": "^2.1.1",
    "mocha": "^3.2.0",
    "nock": "^9.1.4",
    "node-rsa": "^0.4.2",
    "rimraf": "2.6.1",
    "supertest": "^2.0.1"
  },
  "snyk": true
}
